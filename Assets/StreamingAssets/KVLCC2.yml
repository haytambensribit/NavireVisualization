rotations convention: [psi, theta', phi''] 

environmental constants:
    g: {value: 9.8067, unit: m/s^2}
    rho: {value: 1000, unit: kg/m^3}
    nu: {value: 1.18e-6, unit: m^2/s}
    air rho: {value: 1.225, unit: kg/m^2}

environment models:
  - model: uniform wind
    velocity: {unit: m/s, value: 10.}
    direction: {unit: deg, value: 90.}
  - model: no waves
    constant sea elevation in NED frame: {value: 0, unit: m}

bodies: # All bodies have NED as parent frame
  - name: ship
    mesh: KVLCC2_mesh.stl
    position of body frame relative to mesh:
        frame: mesh
        x: {value: 0, unit: m}
        y: {value: 0, unit: m}
        z: {value: 0, unit: m}
        phi: {value: 0, unit: rad}
        theta: {value: 0, unit: rad}
        psi: {value: 0, unit: rad}
    initial position of body frame relative to NED:
        frame: NED
        x: {value: 0, unit: m}
        y: {value: 0, unit: m}
        z: {value: 0, unit: m}
        phi: {value: 0, unit: deg}
        theta: {value: 0, unit: deg}
        psi: {value: 0., unit: deg}
    initial velocity of body frame relative to NED:
        frame: ship
        u: {value: 8., unit: m/s}
        v: {value: 0, unit: m/s}
        w: {value: 0, unit: m/s}
        p: {value: 0, unit: rad/s}
        q: {value: 0, unit: rad/s}
        r: {value: 0, unit: rad/s}
    dynamics:
        hydrodynamic forces calculation point in body frame:
            x: {value: 0, unit: m}
            y: {value: 0, unit: m}
            z: {value: 0, unit: m}
        centre of inertia:
            frame: ship
            x: {value: 0, unit: m}
            y: {value: 0, unit: m}
            z: {value: 2.2, unit: m}
        rigid body inertia matrix at the center of gravity and projected in the body frame:
            row 1: [3.101981e+08,0.000000e+00,0.000000e+00,0.000000e+00,0.000000e+00,0.000000e+00]
            row 2: [0.000000e+00,3.101981e+08,0.000000e+00,0.000000e+00,0.000000e+00,0.000000e+00]
            row 3: [0.000000e+00,0.000000e+00,3.101981e+08,0.000000e+00,0.000000e+00,0.000000e+00]
            row 4: [0.000000e+00,0.000000e+00,0.000000e+00,2.087872e+11,1.201552e+09,2.187367e+10]
            row 5: [0.000000e+00,0.000000e+00,0.000000e+00,1.201552e+09,2.421491e+12,5.394442e+08]
            row 6: [0.000000e+00,0.000000e+00,0.000000e+00,2.187367e+10,5.394442e+08,2.464725e+12]
        added mass matrix at the center of gravity and projected in the body frame:
            from hdb: KVLCC2.hdb
    external forces:
      - model: gravity
      - model: non-linear hydrostatic (fast)
      - model: non-linear Froude-Krylov
      - model: Holtrop & Mennen
        Lwl: {value: 325.5,unit: m}
        Lpp: {value: 320,unit: m}
        B: {value: 58,unit: m}
        Ta: {value: 20.8,unit: m}
        Tf: {value: 20.8,unit: m}
        Vol: {value: 312622,unit: m^3}
        lcb: 3.48
        S: {value: 27194,unit: m^2}
        Abt: {value: 25,unit: m^2}
        hb: {value: 2.5,unit: m}
        Cm: 0.998
        Cwp: 0.83
        At: {value: 0,unit: m^2}
        Sapp: {value: 273.3,unit: m^2}
        Cstern: 0
        1+k2: 2
        apply on ship speed direction: false
      - model: radiation damping
        hdb: KVLCC2.hdb
        type of quadrature for cos transform: simpson
        type of quadrature for convolution: simpson
        nb of points for retardation function discretization: 100
        omega min: {value: 0.01, unit: rad/s}
        omega max: {value: 8, unit: rad/s}
        tau min: {value: 0, unit: s}
        tau max: {value: 80, unit: s}
        forward speed correction: true
        suppress constant part: true
        output Br and K: false
        calculation point in body frame:
            x: {value: 0, unit: m}
            y: {value: 0, unit: m}
            z: {value: 0, unit: m}
      - model: diffraction
        hdb: KVLCC2.hdb
        calculation point in body frame:
            x: {value: 0, unit: m}
            y: {value: 0, unit: m}
            z: {value: 0, unit: m}
        mirror for 180 to 360: true
      - model: MMG maneuvering
        calculation point in body frame:
            x: {value: -11.1, unit: m}
            y: {value: 0, unit: m}
            z: {value: 0, unit: m}
        Lpp: {value: 320, unit: m}
        T: {value: 20.8, unit: m}
        Xvv: -0.04
        Xrr: 0.011
        Xvr: 0.002
        Xvvvv: 0.771
        Yv: -0.315
        Yr: 0.083
        Yvvv: -1.607
        Yrvv: 0.379
        Yvrr: -0.391
        Yrrr: 0.008
        Nv: -0.137
        Nr: -0.049
        Nvvv: -0.03
        Nrvv: -0.294
        Nvrr: 0.055
        Nrrr: -0.013
      - name: propellerAndRudder
        model: propeller+rudder
        position of propeller frame:
            frame: mesh(ship)
            x: {value: -163.82, unit: m}
            y: {value: 0, unit: m}
            z: {value: 15, unit: m}
            phi: {value: 0, unit: rad}
            theta: {value: 0, unit: deg}
            psi: {value: 0, unit: deg}
        wake coefficient w: 0.576
        relative rotative efficiency etaR: 1
        thrust deduction factor t: 0.7
        rotation: clockwise
        number of blades: 5
        blade area ratio AE/A0: 0.431
        diameter: {value: 9.326, unit: m}
        rudder area: {value: 136.7, unit: m^2} #{value: 273.3, unit: m^2}
        rudder height: {value: 15.8, unit: m^2}
        effective aspect ratio factor: 1.7
        lift tuning coefficient: 2.1
        drag tuning coefficient: 1
        position of rudder in body frame:
            x: {value: -170, unit: m}
            y: {value: 0, unit: m}
            z: {value: 10, unit: m}
      - model: strip theory
        name: WPS
        control: commands
        options:
            verbose: false
            useAWSsquare: false
        plane of symmetry:
            point:
                x: {value: 0., unit: m}
                y: {value: 0., unit: m}
                z: {value: 0., unit: m}
            normal vector:
                x: {value: 0., unit: m}
                y: {value: 0., unit: m}
                z: {value: -1., unit: m}
            frame: ship
        wind propulsion system:
          - name: sail_1
            geometry: 3D
            data:
              - element: 1
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: 0., unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 2
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -5.7, unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 3
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -11.5, unit: m}
                chord: {value: 22.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 4
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -17., unit: m}
                chord: {value: 22.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 5
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -22.5, unit: m}
                chord: {value: 22.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 6
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -27.8, unit: m}
                chord: {value: 21.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml      
              - element: 7
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -32.9, unit: m}
                chord: {value: 21.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 8
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -37.8, unit: m}
                chord: {value: 20.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 9
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -42.5, unit: m}
                chord: {value: 20., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 10
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -46.9, unit: m}
                chord: {value: 19.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 11
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -50.9, unit: m}
                chord: {value: 18.4, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 12
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -54.8, unit: m}
                chord: {value: 17.3, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml 
              - element: 13
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -57.8, unit: m}
                chord: {value: 16.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 14
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -60.9, unit: m}
                chord: {value: 15.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 15
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -63.4, unit: m}
                chord: {value: 14., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 16
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -65.5, unit: m}
                chord: {value: 13.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 17
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -67.1, unit: m}
                chord: {value: 12.7, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 18
                center:
                    x: {value: 100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -69.2, unit: m}
                chord: {value: 11.9, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml    
          - name: sail_2
            geometry: 3D
            data:
              - element: 1
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: 0., unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 2
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -5.7, unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 3
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -11.5, unit: m}
                chord: {value: 22.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 4
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -17., unit: m}
                chord: {value: 22.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 5
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -22.5, unit: m}
                chord: {value: 22.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 6
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -27.8, unit: m}
                chord: {value: 21.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml      
              - element: 7
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -32.9, unit: m}
                chord: {value: 21.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 8
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -37.8, unit: m}
                chord: {value: 20.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 9
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -42.5, unit: m}
                chord: {value: 20., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 10
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -46.9, unit: m}
                chord: {value: 19.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 11
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -50.9, unit: m}
                chord: {value: 18.4, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 12
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -54.8, unit: m}
                chord: {value: 17.3, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml 
              - element: 13
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -57.8, unit: m}
                chord: {value: 16.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 14
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -60.9, unit: m}
                chord: {value: 15.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 15
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -63.4, unit: m}
                chord: {value: 14., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 16
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -65.5, unit: m}
                chord: {value: 13.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 17
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -67.1, unit: m}
                chord: {value: 12.7, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 18
                center:
                    x: {value: 0., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -69.2, unit: m}
                chord: {value: 11.9, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                    
          - name: sail_3
            geometry: 3D
            data:
              - element: 1
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: 0., unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 2
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -5.7, unit: m}
                chord: {value: 23., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 3
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -11.5, unit: m}
                chord: {value: 22.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 4
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -17., unit: m}
                chord: {value: 22.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 5
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -22.5, unit: m}
                chord: {value: 22.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 6
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -27.8, unit: m}
                chord: {value: 21.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml      
              - element: 7
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -32.9, unit: m}
                chord: {value: 21.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 8
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -37.8, unit: m}
                chord: {value: 20.8, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 9
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -42.5, unit: m}
                chord: {value: 20., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 10
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -46.9, unit: m}
                chord: {value: 19.5, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 11
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -50.9, unit: m}
                chord: {value: 18.4, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 12
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -54.8, unit: m}
                chord: {value: 17.3, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml 
              - element: 13
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -57.8, unit: m}
                chord: {value: 16.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml                  
              - element: 14
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -60.9, unit: m}
                chord: {value: 15.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 15
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -63.4, unit: m}
                chord: {value: 14., unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 16
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -65.5, unit: m}
                chord: {value: 13.2, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 17
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -67.1, unit: m}
                chord: {value: 12.7, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml
              - element: 18
                center:
                    x: {value: -100., unit: m}
                    y: {value: 0., unit: m}
                    z: {value: -69.2, unit: m}
                chord: {value: 11.9, unit: m}                
                foil data: 
                  - file: ../airfoil_data/NACA0015_v2.yml              
 
commands:
  - name: propellerAndRudder
    t: [0, 10]
    P/D: {unit: none, values: [0.721, 0.721]}
    rpm: {unit: rpm, values: [0, 0]}
    beta: {unit: none, values: [0, 0]}
  - name: sail_1
    t: [0, 100]
    setting: {unit: deg, values: [35., 35.]}
  - name: sail_2
    t: [0, 100]
    setting: {unit: deg, values: [35., 35.]}
  - name: sail_3
    t: [0, 100]
    setting: {unit: deg, values: [35., 35.]}

